{% extends "base.html" %}
{% load staticfiles compress %}
{% block title %}Listing{% endblock %}
{% block content %}

<style>
.container {
  width: 100%;
}
</style>
<div id="data">

</div>

<div class="row">
  <div class="col-md-12">
    <div class="lore-pagination" id="lore-pagination">
    </div>
  </div>
</div>
{% include "includes/resource_panel.html" %}
<!-- Modal -->
<div class="modal fade" id="progress-modal" tabindex="-1" role="dialog" aria-labelledby="progressModal">
  <div class="modal-dialog" role="document">
  </div>
</div>
<div id="confirmation-container"></div>
{% endblock %}
{% block postcontent %}
{{ block.super }}
{% compress js %}
<script type="text/jsx"
        src="{% static "ui/js/manage_taxonomies.jsx" %}">
</script>
<script type="text/jsx"
        src="{% static "ui/js/learning_resources.jsx" %}">
</script>
<script type="text/jsx"
        src="{% static "ui/js/static_assets.jsx" %}">
</script>
<script type="text/jsx"
        src="{% static "ui/js/lr_exports.jsx" %}">
</script>
<script type="text/jsx"
        src="{% static "ui/js/listing_resources.jsx" %}">
</script>
<script type="text/jsx"
        src="{% static "ui/js/pagination.jsx" %}">
</script>
<script type="text/jsx"
        src="{% static "ui/js/utils.jsx" %}">
</script>
<script type="text/jsx"
        src="{% static "ui/js/lore_data_table.jsx" %}">
</script>
{% endcompress %}
<script type="text/javascript">
require(["jquery", "utils", "lore_data_table"],
        function($, Utils, LoreDataTable) {
  var listingOptions = {
    repoSlug: "{{ repo.slug|escapejs }}",
    allExports: {{ exports_json|safe }},
    loggedInUsername: "{{ request.user.username|escapejs }}",
    imageDir: "{% static "ui/images"|escapejs %}",
    pageSize: {{ page_size_json|safe }}
  };

  $(function() {
    Utils.getCollection("/api/v1/repositories/" + listingOptions.repoSlug + "/search/?page_size=1000").then(function(results) {
      LoreDataTable.loader(listingOptions.repoSlug, results, $("#data")[0]);
    });
  });
});
</script>
{% compress css %}
    <link
       rel="stylesheet"
       href="{% static "lib/css/index.min.css" %}" />
{% endcompress %}
{% endblock %}
